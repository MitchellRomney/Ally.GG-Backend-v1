{% extends 'dashboard/base.html' %}
{% load static %}

{% block title %}
    {{ summoner.summonerName }} Summoner Statistics - League of Legends // {{ block.super }}
{% endblock title %}

{% block content %}
    <div id="errors">
        <transition name="fade">
            <div class="error-wrapper" v-if="isError" v-cloak>
                <div class="alert">
                    <span><i class="fas fa-exclamation-triangle"></i> [[ errorMessage ]]</span>
                </div>
            </div>
        </transition>
    </div>
    <div id="summonerProfile" :class="{ error: isError }">
        <div class="top-wrapper">
            <div class="avatar-wrapper">
                <div class="avatar" v-if="summoner.profileIconId">
                    <img class="resp-img" onerror="this.src='{% static 'dashboard/images/placeholder.png' %}'"
                         :src="'http://ddragon.leagueoflegends.com/cdn/{{ SETTINGS.LATEST_PATCH }}/img/profileicon/' + summoner.profileIconId + '.png'">
                    <span class="level" v-if="summoner" v-cloak>[[ summoner.summonerLevel ]]</span>
                </div>
                <span class="updated">Last Updated: <span v-if="summoner"
                                                          v-cloak>[[ summoner.lastUpdated ]]</span></span>
                <button v-on:click="updateSummoner">Update Summoner</button>
            </div>
            <div class="title" v-if="summoner.summonerName" v-cloak>
                <h1 class="summonerName" :style="'font-size: ' + [[ nameFontSize ]]">[[ summoner.summonerName ]]</h1>
                {% if summoner.user_profile %}
                    <div class="user">
                        <div class="avatar">
                            <img class="resp-img" onerror="this.src='{% static 'dashboard/images/placeholder.png' %}'"
                                 src="{{ summoner.user_profile.avatar }}"
                                 alt="{{ summoner.user_profile.user.username }}">
                        </div>
                        <a href="/profiles/{{ summoner.user_profile.user.username }}">{{ summoner.user_profile.first_name }} {{ summoner.user_profile.last_name }}</a>
                    </div>
                {% endif %}
                <span class="updated">Last Updated: <span v-if="summoner"
                                                          v-cloak>[[ summoner.last_updated ]]</span></span>
                <button v-on:click="updateSummoner">Update Summoner</button>
            </div>
            <div class="ranked-stats">
                <div class="ranked-solo" v-if="summoner.rankedSolo" v-cloak>
                    <div class="medal">
                        <img class="resp-img"
                             :src="'{% static 'dashboard/images/ranked_medals/' %}' +
                             summoner.rankedSolo.tier.toLowerCase() + '_' + summoner.rankedSolo.rankNumber + '.png'">
                    </div>
                    <div class="text">
                        <h5 class="faded">Ranked Solo</h5>
                        <h2 class="rank">
                            [[ summoner.rankedSolo.tier ]] [[ summoner.rankedSolo.rank ]]
                        </h2>
                        <h5 class="winrate">
                            [[ summoner.rankedSolo.lp ]]LP |
                            <span> [[ summoner.rankedSolo.wins ]]W / [[ summoner.rankedSolo.losses ]]L</span>
                        </h5>
                    </div>
                </div>
                <div class="ranked-solo" v-if="summoner.rankedFlex3" v-cloak>
                    <div class="medal">
                        <img class="resp-img"
                             :src="'{% static 'dashboard/images/ranked_medals/' %}' +
                             summoner.rankedFlex3.tier.toLowerCase() + '_' + summoner.rankedFlex3.rankNumber + '.png'">
                    </div>
                    <div class="text">
                        <h5 class="faded">Flex 3v3</h5>
                        <h2 class="rank">
                            [[ summoner.rankedFlex3.tier ]] [[ summoner.rankedFlex3.rank ]]
                        </h2>
                        <h5 class="winrate">
                            [[ summoner.rankedFlex3.lp ]]LP |
                            <span> [[ summoner.rankedFlex3.wins ]]W / [[ summoner.rankedFlex3.losses ]]L</span>
                        </h5>
                    </div>
                </div>
                <div class="ranked-solo" v-if="summoner.rankedFlex5" v-cloak>
                    <div class="medal">
                        <img class="resp-img"
                             :src="'{% static 'dashboard/images/ranked_medals/' %}' +
                             summoner.rankedFlex5.tier.toLowerCase() + '_' + summoner.rankedFlex5.rankNumber + '.png'">
                    </div>
                    <div class="text">
                        <h5 class="faded">Flex 5v5</h5>
                        <h2 class="rank">
                            [[ summoner.rankedFlex5.tier ]] [[ summoner.rankedFlex5.rank ]]
                        </h2>
                        <h5 class="winrate">
                            [[ summoner.rankedFlex5.lp ]]LP |
                            <span> [[ summoner.rankedFlex5.wins ]]W / [[ summoner.rankedFlex5.losses ]]L</span>
                        </h5>
                    </div>
                </div>
            </div>
            <ul id="summoner-menu">
                <li class="general">General</li>
                <li class="matches">Matches</li>
                <li class="champions">Champions</li>
                <li class="achievements">Achievements</li>
                <span class="selector"></span>
            </ul>
        </div>
        <div id="summoner-content-wrapper" class="general">
            <div class="content-general">
                <div class="ranked-panel">
                    <h2>Ranked Solo</h2>
                    <h5 class="rank" v-if="summoner.rankedSolo" v-cloak>
                        [[ summoner.rankedSolo.tier ]] [[ summoner.rankedSolo.rank ]]
                    </h5>
                    <div class="svg-item" v-if="summoner.rankedSolo" v-cloak>
                        <svg width="100%" height="100%" viewBox="0 0 40 40" class="donut">
                            <defs>
                                <linearGradient id="IronGradient">
                                    <stop offset="0%" stop-color="rgba(74,98,110,1)"/>
                                    <stop offset="100%" stop-color="rgba(30,33,48,1)"/>
                                </linearGradient>
                                <linearGradient id="BronzeGradient">
                                    <stop offset="0%" stop-color="rgba(132,40,40,1)"/>
                                    <stop offset="100%" stop-color="rgba(246,119,119,1)"/>
                                </linearGradient>
                                <linearGradient id="SilverGradient">
                                    <stop offset="0%" stop-color="rgba(148,241,246,1)"/>
                                    <stop offset="100%" stop-color="rgba(148,189,246,1)"/>
                                </linearGradient>
                                <linearGradient id="GoldGradient">
                                    <stop offset="0%" stop-color="rgba(255,246,63,1)"/>
                                    <stop offset="100%" stop-color="rgba(226,0,0,1)"/>
                                </linearGradient>
                                <linearGradient id="PlatinumGradient">
                                    <stop offset="0%" stop-color="rgba(15,213,172,1)"/>
                                    <stop offset="100%" stop-color="rgba(34,182,198,1)"/>
                                </linearGradient>
                                <linearGradient id="DiamondGradient">
                                    <stop offset="0%" stop-color="rgba(17,127,238,1)"/>
                                    <stop offset="100%" stop-color="rgba(190,47,252,1)"/>
                                </linearGradient>
                                <linearGradient id="MasterGradient">
                                    <stop offset="0%" stop-color="rgba(57,31,105,1)"/>
                                    <stop offset="50%" stop-color="rgba(115,43,155,1)"/>
                                    <stop offset="100%" stop-color="rgba(231,75,184,1)"/>
                                </linearGradient>
                                <linearGradient id="GrandmasterGradient">
                                    <stop offset="0%" stop-color="#d64c7f"/>
                                    <stop offset="100%" stop-color="#ee4758"/>
                                </linearGradient>
                                <linearGradient id="ChallengerGradient">
                                    <stop offset="0%" stop-color="#fbd786"/>
                                    <stop offset="100%" stop-color="#f7797d"/>
                                </linearGradient>
                            </defs>
                            <circle class="donut-hole" cx="20" cy="20" r="15.91549430918954" fill="#fff"></circle>
                            <circle class="donut-ring" cx="20" cy="20" r="15.91549430918954" fill="transparent"
                                    stroke-width="3.5"></circle>
                            <circle class="donut-segment" cx="20" cy="20" r="15.91549430918954" fill="transparent"
                                    stroke-width="3.5"
                                    :stroke-dasharray="summoner.rankedSolo.ringValues"
                                    stroke-dashoffset="25"
                                    :stroke="'url(#' + summoner.rankedSolo.tier + 'Gradient)'"></circle>
                        </svg>
                        <div class="inside-svg">
                            <h2 class="total-LP">[[ summoner.rankedSolo.lp ]]LP</h2>
                            <h5 class="win-loss">[[ summoner.rankedSolo.wins ]]W / [[ summoner.rankedSolo.losses
                                ]]L</h5>
                            <div class="medal">
                                <img class="resp-img"
                                     :src="'{% static 'dashboard/images/ranked_medals/' %}' +
                                 summoner.rankedSolo.tier.toLowerCase() + '_' + summoner.rankedSolo.rankNumber + '.png'">
                            </div>
                        </div>
                    </div>
                    <div class="league" v-if="summoner.rankedSolo" v-cloak>
                        [[ summoner.rankedSolo.leagueName ]]
                    </div>
                </div>
                <div class="latest-matches-panel">
                    <h2>Latest Matches</h2>
                    <div class="latest-matches" v-if="!matchLoading" v-cloak>
                        <div class="match" v-for="player in matches.slice(0,3)">
                            <div class="champion-splash"
                                 :style="{ 'background-image': 'url(\'/static/dashboard/images/history_splash/' + player.champion.champId + '_0.png\')' }">
                                <div class="triangle"></div>
                                <div class="result-wrapper">
                                    <span class="result" :class="{ win : player.win == 'W' }">[[ player.win ]]</span>
                                </div>
                            </div>
                            <div class="main-info">
                                <span class="champion">[[ player.champion.name ]]</span>
                                <span class="duration">[[ player.match.gameDurationTime ]]</span>
                                <span class="timeAgo">[[ player.timeAgo ]]</span>
                                <span class="queue">[[ player.match.queue ]]</span>
                            </div>
                            <div class="player-info">
                                <span class="level">Level [[ player.champLevel ]]</span>
                                <span class="kda">[[ player.kills ]]/[[ player.deaths ]]/[[ player.assists ]]</span>
                                <span class="average">[[ player.kda_average ]] KDA</span>
                            </div>
                            <div class="sub-info">
                                <span class="farm">[[ player.totalMinionsKilled ]] ([[ player.csPmin ]]) CS</span>
                                <span class="kill_p">Kill Participation<br><span>[[ player.killParticipation ]]</span></span>
                            </div>
                            <div class="items">
                                <div class="trinket">
                                    <img v-if="player.item6.itemId != 0"
                                         :src="'{% static 'dashboard/images/items/' %}' + [[ player.item6.itemId ]] + '.png'"
                                         :alt="[[ player.item6.name ]]"/>
                                </div>
                                <div class="item-1">
                                    <img v-if="player.item0.itemId != 0"
                                         :src="'{% static 'dashboard/images/items/' %}' + [[ player.item0.itemId ]] + '.png'"
                                         :alt="[[ player.item0.name ]]"/>
                                </div>
                                <div class="item-2">
                                    <img v-if="player.item1.itemId != 0"
                                         :src="'{% static 'dashboard/images/items/' %}' + [[ player.item1.itemId ]] + '.png'"
                                         :alt="[[ player.item1.name ]]"/>
                                </div>
                                <div class="item-3">
                                    <img v-if="player.item2.itemId != 0"
                                         :src="'{% static 'dashboard/images/items/' %}' + [[ player.item2.itemId ]] + '.png'"
                                         :alt="[[ player.item2.name ]]"/>
                                </div>
                                <div class="item-4">
                                    <img v-if="player.item3.itemId != 0"
                                         :src="'{% static 'dashboard/images/items/' %}' + [[ player.item3.itemId ]] + '.png'"
                                         :alt="[[ player.item3.name ]]"/>
                                </div>
                                <div class="item-5">
                                    <img v-if="player.item4.itemId != 0"
                                         :src="'{% static 'dashboard/images/items/' %}' + [[ player.item4.itemId ]] + '.png'"
                                         :alt="[[ player.item4.name ]]"/>
                                </div>
                                <div class="item-6">
                                    <img v-if="player.item5.itemId != 0"
                                         :src="'{% static 'dashboard/images/items/' %}' + [[ player.item5.itemId ]] + '.png'"
                                         :alt="[[ player.item5.name ]]"/>
                                </div>
                                <div class="summoner-1">
                                    <img :src="'{% static 'dashboard/images/spells/' %}' + [[ player.spell1Id.imageFull ]]"
                                         :alt="[[ player.spell1Id.name ]]"/>
                                </div>
                                <div class="summoner-2">
                                    <img :src="'{% static 'dashboard/images/spells/' %}' + [[ player.spell2Id.imageFull ]]"
                                         :alt="[[ player.spell2Id.name ]]"/>
                                </div>
                                <div class="rune-primary">
                                    <img :src="'{% static 'dashboard/images/' %}' + [[ player.perk0.icon ]]"
                                         :alt="[[ player.perk0.name ]]"/>
                                </div>
                                <div class="rune-secondary">
                                    <img :src="'{% static 'dashboard/images/perk-images/Styles/' %}' + [[ player.perkSubStyle ]] + '.png'"
                                         :alt="[[ player.perk4.name ]]"/>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="content-matches">
                <div class="latest-matches" v-if="!matchLoading" v-cloak>
                    <div class="match" v-for="player in matches">
                        <div class="champion-splash">
                            <img :src="'{% static 'dashboard/images/history_splash/' %}' + [[ player.champion.champId ]] + '_0.png'"
                                 :alt="[[ player.champion.name ]]"/>
                            <div class="triangle"></div>
                            <div class="result-wrapper">
                                <span class="result" :class="{ win : player.win == 'W' }">[[ player.win ]]</span>
                            </div>
                        </div>
                        <div class="main-info">
                            <span class="champion">[[ player.champion.name ]]</span>
                            <span class="duration">[[ player.match.gameDurationTime ]]</span>
                            <span class="timeAgo">[[ player.timeAgo ]]</span>
                            <span class="queue">[[ player.match.queue ]]</span>
                        </div>
                        <div class="player-info">
                            <span class="level">Level [[ player.champLevel ]]</span>
                            <span class="kda">[[ player.kills ]]/[[ player.deaths ]]/[[ player.assists ]]</span>
                            <span class="average">[[ player.kda_average ]] KDA</span>
                        </div>
                        <div class="sub-info">
                            <span class="farm">[[ player.totalMinionsKilled ]] ([[ player.cs_pmin ]]) CS</span>
                            <span class="kill_p">Kill Participation<br><span>[[ player.killParticipation ]]</span></span>
                        </div>
                        <div class="items">
                            <div class="trinket">
                                <img v-if="player.item6.itemId != 0"
                                     :src="'{% static 'dashboard/images/items/' %}' + [[ player.item6.itemId ]] + '.png'"
                                     :alt="[[ player.item6.name ]]"/>
                            </div>
                            <div class="item-1">
                                <img v-if="player.item0.itemId != 0"
                                     :src="'{% static 'dashboard/images/items/' %}' + [[ player.item0.itemId ]] + '.png'"
                                     :alt="[[ player.item0.name ]]"/>
                            </div>
                            <div class="item-2">
                                <img v-if="player.item1.itemId != 0"
                                     :src="'{% static 'dashboard/images/items/' %}' + [[ player.item1.itemId ]] + '.png'"
                                     :alt="[[ player.item1.name ]]"/>
                            </div>
                            <div class="item-3">
                                <img v-if="player.item2.itemId != 0"
                                     :src="'{% static 'dashboard/images/items/' %}' + [[ player.item2.itemId ]] + '.png'"
                                     :alt="[[ player.item2.name ]]"/>
                            </div>
                            <div class="item-4">
                                <img v-if="player.item3.itemId != 0"
                                     :src="'{% static 'dashboard/images/items/' %}' + [[ player.item3.itemId ]] + '.png'"
                                     :alt="[[ player.item3.name ]]"/>
                            </div>
                            <div class="item-5">
                                <img v-if="player.item4.itemId != 0"
                                     :src="'{% static 'dashboard/images/items/' %}' + [[ player.item4.itemId ]] + '.png'"
                                     :alt="[[ player.item4.name ]]"/>
                            </div>
                            <div class="item-6">
                                <img v-if="player.item5.itemId != 0"
                                     :src="'{% static 'dashboard/images/items/' %}' + [[ player.item5.itemId ]] + '.png'"
                                     :alt="[[ player.item5.name ]]"/>
                            </div>
                            <div class="summoner-1">
                                <img :src="'{% static 'dashboard/images/spells/' %}' + [[ player.spell1Id.imageFull ]]"
                                     :alt="[[ player.spell1Id.name ]]"/>
                            </div>
                            <div class="summoner-2">
                                <img :src="'{% static 'dashboard/images/spells/' %}' + [[ player.spell2Id.imageFull ]]"
                                     :alt="[[ player.spell2Id.name ]]"/>
                            </div>
                            <div class="rune-primary">
                                <img :src="'{% static 'dashboard/images/' %}' + [[ player.perk0.icon ]]"
                                     :alt="[[ player.perk0.name ]]"/>
                            </div>
                            <div class="rune-secondary">
                                <img :src="'{% static 'dashboard/images/perk-images/Styles/' %}' + [[ player.perkSubStyle ]] + '.png'"
                                     :alt="[[ player.perk4.name ]]"/>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="content-champions">
                Champions
            </div>
            <div class="content-achievements">
                Achievements
            </div>
        </div>
        <input type='hidden' value='{{ summoner.summonerName }}' id='summonerName'/>
    </div>
    <script>
        $(document).ready(onSummonerProfileLoad())
    </script>
{% endblock content %}
