{% extends 'dashboard/base.html' %}

{% block content %}
<div id="home">
  <div class="panel">
    <h1>Homepage</h1>
    <h2><strong>Players in Database: </strong>{{ summonerCount }}</h2>
    <a href="/summoners">Summoners</a>

    {% if request.user.is_superuser %}
    <h2>Power Buttons</h2>
    <button name="action" v-on:click="updateChampions" type="submit">Update Champions</button>
    {% endif %}
  </div>
</div>

<script>
var vm = new Vue({
  delimiters: ['[[', ']]'],
  el: '#home',
  data: {},
  methods: {
    updateChampions: function(event) {
      axios.defaults.xsrfCookieName = 'csrftoken'
      axios.defaults.xsrfHeaderName = 'X-CSRFToken'
      axios.post('/api/champions/', {
        isUpdate: true,
      }).then(response => {
        console.log(response);
      });
    },
  }
})
</script>
{% endblock content %}
